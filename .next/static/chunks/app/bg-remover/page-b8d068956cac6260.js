(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{2317:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>n});var a=l(8081),r=l(2149);function n(){let[e,t]=(0,r.useState)(null),[l,n]=(0,r.useState)(30),[s,d]=(0,r.useState)(3),[i,o]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),h=(0,r.useRef)(null),m=(0,r.useRef)(null),g=(0,r.useRef)(null),x=(e,t,l,a)=>{let r=new Uint8ClampedArray(t*l),n=new Uint8ClampedArray(t*l),s=[];for(let e=0;e<t;e++)b(s,n,e,0,t),b(s,n,e,l-1,t);for(let e=0;e<l;e++)b(s,n,0,e,t),b(s,n,t-1,e,t);for(;s.length>0;){let[d,i]=s.shift(),o=i*t+d;if(1!==r[o])for(let[c,h]of(r[o]=1,u(Math.min(50,s.length/(t*l)*50)),[[d+1,i],[d-1,i],[d,i+1],[d,i-1],[d+1,i+1],[d+1,i-1],[d-1,i+1],[d-1,i-1]])){if(c<0||c>=t||h<0||h>=l||1===n[h*t+c])continue;let r=4*o,d=(h*t+c)*4,i=e[r]-e[d],u=e[r+1]-e[d+1],m=e[r+2]-e[d+2];Math.sqrt(i*i+u*u+m*m)<2.55*a&&b(s,n,c,h,t)}}return r},b=(e,t,l,a,r)=>{let n=a*r+l;0===t[n]&&(e.push([l,a]),t[n]=1)},f=(e,t,l,a,r,n)=>{let s=document.createElement("canvas");s.width=a,s.height=r;let d=s.getContext("2d");if(!d)return;d.drawImage(t,0,0);let i=d.getImageData(0,0,a,r),o=i.data;for(let e=0;e<r;e++){u(50+e/r*50);for(let t=0;t<a;t++){let r=e*a+t,n=4*r;1===l[r]&&(o[n+3]=0)}}if(d.putImageData(i,0,0),n>0){let t=document.createElement("canvas");t.width=a,t.height=r;let l=t.getContext("2d");if(!l)return;l.drawImage(s,0,0),l.filter="blur(".concat(n,"px)"),l.drawImage(s,0,0),e.clearRect(0,0,a,r),e.drawImage(t,0,0)}else e.clearRect(0,0,a,r),e.drawImage(s,0,0)};return(0,a.jsxs)("div",{className:"max-w-3xl mx-auto p-5 font-sans text-gray-800 leading-relaxed",children:[(0,a.jsx)("h1",{className:"text-center text-3xl font-bold text-blue-600 mb-8",children:"Background Remover"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-10 text-center cursor-pointer transition-colors hover:border-blue-600",onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Click or drag an image here to upload"}),(0,a.jsx)("input",{title:"Upload Image",ref:g,type:"file",accept:"image/*",onChange:e=>{var l;let a=null===(l=e.target.files)||void 0===l?void 0:l[0];if(!a)return;let r=new FileReader;r.onload=e=>{var l;let a=new Image;a.onload=()=>{if(t(a),h.current){let e=h.current.getContext("2d");e&&(h.current.width=a.width,h.current.height=a.height,e.drawImage(a,0,0))}},a.src=null===(l=e.target)||void 0===l?void 0:l.result},r.readAsDataURL(a)},className:"hidden"})]}),e&&(0,a.jsxs)("div",{className:"bg-gray-50 p-5 rounded-lg mb-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Settings"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:"threshold",className:"block mb-2",children:["Sensitivity: ",l]}),(0,a.jsx)("input",{type:"range",id:"threshold",min:"1",max:"100",value:l,onChange:e=>n(parseInt(e.target.value)),className:"w-full"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:"blur",className:"block mb-2",children:["Edge Smoothness: ",s]}),(0,a.jsx)("input",{type:"range",id:"blur",min:"0",max:"10",value:s,onChange:e=>d(parseInt(e.target.value)),className:"w-full"})]})]}),i&&(0,a.jsxs)("div",{className:"relative h-8 bg-gray-100 rounded-lg mt-5 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute h-full bg-blue-600 rounded-lg transition-all duration-300",style:{width:"".concat(c,"%")}}),(0,a.jsxs)("div",{className:"absolute w-full text-center text-white font-bold leading-8 text-shadow",children:["Processing: ",Math.round(c),"%"]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-5 justify-center my-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Original"}),(0,a.jsx)("canvas",{ref:h,className:"max-w-full h-auto border border-gray-300 rounded-lg ".concat(e?"block":"hidden")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Result"}),(0,a.jsx)("canvas",{ref:m,className:"max-w-full h-auto border border-gray-300 rounded-lg ".concat(e?"block":"hidden")})]})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-3 mt-5",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded-md text-white font-medium transition-colors ".concat(!e||i?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),onClick:()=>{if(!e||!h.current||!m.current)return;o(!0),u(0);let t=h.current.getContext("2d"),a=m.current.getContext("2d");if(!t||!a)return;m.current.width=e.width,m.current.height=e.height;let r=x(t.getImageData(0,0,e.width,e.height).data,e.width,e.height,l);f(a,e,r,e.width,e.height,s),o(!1),u(100)},disabled:!e||i,children:"Remove Background"}),(0,a.jsx)("button",{className:"px-4 py-2 rounded-md text-white font-medium transition-colors ".concat(!e||i||c<100?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),onClick:()=>{if(!m.current)return;let e=document.createElement("a");e.download="removed-background.png",e.href=m.current.toDataURL("image/png"),e.click()},disabled:!e||i||c<100,children:"Download Result"})]})]})}},9349:(e,t,l)=>{Promise.resolve().then(l.bind(l,2317))}},e=>{var t=t=>e(e.s=t);e.O(0,[497,954,358],()=>t(9349)),_N_E=e.O()}]);