(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3481:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,7950,23)),Promise.resolve().then(s.bind(s,9929))},9929:(e,t,s)=>{"use strict";s.d(t,{ImageUploader:()=>w});var r=s(8081),a=s(2149),n=s(899),i=s(7478),l=s(7860),c=s(3750),d=s(3484),o=s(6522),x=s(8941);function u(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,x.QP)((0,o.$)(t))}let h=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:t,variant:s,size:a,asChild:n=!1,...i}=e,l=n?c.DX:"button";return(0,r.jsx)(l,{"data-slot":"button",className:u(h({variant:s,size:a,className:t})),...i})}function p(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card",className:u("bg-white/10 backdrop-blur-sm border border-white/20 bg-card text-card-foreground flex flex-col gap-6 rounded-xl py-6 shadow-sm",t),...s})}function v(e){let{className:t,...s}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:u("px-6",t),...s})}var g=s(1630),b=s(3058);let f=g.z.object({type:g.z.enum(["image/png","image/jpeg","image/webp"]),size:g.z.number().max(5242880)}),j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return{backgroundImage:"\n    linear-gradient(45deg, #e6e6e6 25%, transparent 25%),\n    linear-gradient(-45deg, #e6e6e6 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #e6e6e6 75%),\n    linear-gradient(-45deg, transparent 75%, #e6e6e6 75%)\n  ",backgroundSize:"".concat(e,"px ").concat(e,"px, ").concat(e,"px ").concat(e,"px, ").concat(e,"px ").concat(e,"px, ").concat(e,"px ").concat(e,"px"),backgroundPosition:"0 0, 0 ".concat(e/2,"px, ").concat(e/2,"px -").concat(e/2,"px, -").concat(e/2,"px 0px")}};function w(){let[e,t]=(0,a.useState)(null),[s,c]=(0,a.useState)(null),[d,o]=(0,a.useState)(null),[x,u]=(0,a.useState)(null),[h,w]=(0,a.useState)(!1),[N,y]=(0,a.useState)(null),[k,P]=(0,a.useState)(!1),[z,C]=(0,a.useState)(0),[E,B]=(0,a.useState)(!0),[D,R]=(0,a.useState)(!1),[L,O]=(0,a.useState)(!1),S=(0,a.useRef)(null),U=(0,a.useRef)(null),A=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(k){let e=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=e||""}}},[k]),(0,a.useEffect)(()=>()=>{A.current&&(URL.revokeObjectURL(A.current),A.current=null),document.documentElement.style.overflow=""},[]);let M=async e=>{try{U.current&&U.current.abort(),U.current=new AbortController,P(!0),C(0),y(null),O(!1);let t=await (0,b.hS)(e,{progress:(e,t,s)=>{C(t/s*100)},output:{format:"image/png",quality:.8},model:"isnet_fp16",debug:!1});A.current&&(URL.revokeObjectURL(A.current),A.current=null);let s=URL.createObjectURL(t);A.current=s,c(s)}catch(e){e instanceof Error&&"AbortError"===e.name||(console.error("Background removal error:",e),y(e instanceof Error?"Failed to remove background: ".concat(e.message):"Failed to remove background. Please try again."))}finally{P(!1),C(0),U.current=null}},_=e=>{try{f.parse({type:e.type,size:e.size}),o(e.name),u(e.size),y(null),R(!1),O(!1),c(null);let s=new FileReader;s.onload=()=>{let e=s.result;t(e),M(e)},s.onerror=()=>{y("Failed to read the file. Please try again.")},s.readAsDataURL(e)}catch(e){e instanceof g.z.ZodError?y("Please upload a valid PNG, JPG, or WEBP image (max 5MB)."):y("Invalid file. Please try a different image.")}},G=e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&_(s)},F=e=>{e.preventDefault(),w(!0)},I=e=>{e.preventDefault(),w(!1)},J=e=>{var t;e.preventDefault(),w(!1);let s=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];s&&_(s)},W=()=>{U.current&&U.current.abort(),A.current&&(URL.revokeObjectURL(A.current),A.current=null),t(null),c(null),o(null),u(null),y(null),P(!1),C(0),R(!1),O(!1),S.current&&(S.current.value="")},K=()=>{if(!s)return;let e=d?d.replace(/\.[^/.]+$/,""):"background-removed",t=document.createElement("a");t.href=s,t.download="".concat(e,".png"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},T="h-[320px] md:h-[380px]";return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-white",children:"Background Remover"}),(0,r.jsx)("p",{className:"text-sm text-white/70 mt-1",children:"Upload a single image (PNG, JPG, WEBP). Max 5MB."})]}),(0,r.jsxs)("div",{className:"hidden md:grid md:grid-cols-[380px_1fr] md:gap-8 items-start",children:[(0,r.jsxs)("aside",{className:"space-y-4",children:[(0,r.jsx)(p,{className:"bg-white/6 border border-white/8 rounded-lg h-full",children:(0,r.jsxs)(v,{className:"p-4 flex flex-col justify-between h-full",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{role:"button",tabIndex:0,onKeyDown:e=>{var t;("Enter"===e.key||" "===e.key)&&(null===(t=S.current)||void 0===t||t.click())},onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},onDragOver:F,onDragLeave:I,onDrop:J,className:"flex flex-col items-center justify-center gap-3 p-4 rounded-md cursor-pointer transition-border border-2 ".concat(h?"border-purple-400 bg-white/6":"border-white/20 hover:border-purple-400/50"),children:[(0,r.jsx)("input",{type:"file",ref:S,onChange:G,accept:".png,.jpg,.jpeg,.webp",className:"hidden"}),(0,r.jsx)("div",{className:"bg-white/8 p-2 rounded-full",children:(0,r.jsx)(n.A,{className:"h-6 w-6 text-white/80"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:"Click or drag to upload"}),(0,r.jsx)("div",{className:"text-xs text-white/60 mt-0.5",children:"PNG • JPG • WEBP • ≤ 5MB"})]})]}),N&&(0,r.jsx)("div",{className:"mt-3 text-xs text-red-400",children:N})]}),(0,r.jsx)("div",{className:"mt-4",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-white/90",children:null!=d?d:"Uploaded image"}),(0,r.jsx)("div",{className:"text-xs text-white/60 mt-1",children:x?x<1024?"".concat(x," B"):x<1048576?"".concat(Math.round(x/1024)," KB"):"".concat((x/1048576).toFixed(2)," MB"):""})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,r.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},className:"text-white/80 px-2 py-1 text-xs",children:"Replace"}),(0,r.jsx)(m,{variant:"ghost",size:"sm",onClick:W,className:"text-red-400 px-2 py-1 text-xs",children:"Clear"})]})]}),k&&(0,r.jsxs)("div",{"aria-live":"polite",className:"mt-3",children:[(0,r.jsx)("div",{className:"w-full bg-white/10 h-2 rounded overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-purple-400 transition-all",style:{width:"".concat(Math.max(4,z),"%")}})}),(0,r.jsxs)("div",{className:"text-xs text-white/60 mt-1",children:["Removing background… ",Math.round(z),"%"]})]})]}):(0,r.jsx)("div",{className:"text-xs text-white/60",children:"No file selected"})})]})}),(0,r.jsxs)(p,{className:"bg-white/4 border border-white/8 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-xs text-white/70",children:"Tip: clear subject + contrasting background yields best results."}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{type:"button","aria-pressed":E,onClick:()=>B(e=>!e),className:"text-xs px-2 py-1 rounded-md transition ".concat(E?"bg-white/6 text-white":"text-white/70 hover:bg-white/5"),children:E?"Checkerboard":"Plain"})})]}),(0,r.jsx)("div",{className:"mt-3 flex gap-2",children:s&&(0,r.jsxs)(m,{variant:"ghost",size:"sm",onClick:K,className:"text-white/80 px-2 py-1 text-xs",children:[(0,r.jsx)(i.A,{className:"h-4 w-4 mr-1"}),"Download PNG"]})})]})]}),(0,r.jsxs)("section",{className:"h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h2",{className:"text-lg font-medium text-white",children:"Preview"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,r.jsxs)(m,{variant:"ghost",size:"sm",onClick:K,className:"text-white/80 px-2 py-1 text-xs",children:[(0,r.jsx)(i.A,{className:"h-3 w-3 mr-1"}),"Download"]}),e&&(0,r.jsx)(m,{variant:"ghost",size:"sm",onClick:W,className:"text-white/80 px-2 py-1 text-xs",children:"Clear"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6 h-full",children:[(0,r.jsxs)(p,{className:"h-full bg-white/6 border border-white/10 rounded-lg overflow-hidden",style:{maxHeight:"60vh"},children:[(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(T," p-6 bg-transparent"),children:e?(0,r.jsx)("img",{src:e,alt:"Original upload",onLoad:()=>R(!0),className:"max-h-full max-w-full object-contain transition-opacity duration-300 ".concat(D?"opacity-100":"opacity-0"),style:{height:"auto",width:"auto"}}):(0,r.jsx)("div",{className:"text-sm text-white/50",children:"Original will appear here"})}),(0,r.jsx)("div",{className:"p-3 text-xs text-center text-white/70",children:"Original"})]}),(0,r.jsxs)(p,{className:"h-full bg-white/6 border border-white/10 rounded-lg overflow-hidden relative",style:{maxHeight:"60vh"},children:[k&&(0,r.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/40",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(l.A,{className:"h-7 w-7 animate-spin text-purple-300 mb-2"}),(0,r.jsxs)("div",{className:"text-xs text-white/80",children:[Math.round(z),"%"]})]})}),(0,r.jsx)("div",{className:"flex items-center justify-center ".concat(T," p-6 overflow-hidden"),style:s&&E?j(12):void 0,children:s?(0,r.jsx)("img",{src:s,alt:"Background removed",onLoad:()=>O(!0),className:"max-h-full max-w-full object-contain transition-opacity duration-300 ".concat(L?"opacity-100":"opacity-0"),style:{height:"auto",width:"auto"}}):(0,r.jsx)("div",{className:"text-sm text-white/50",children:"Processed result will appear here"})}),(0,r.jsx)("div",{className:"p-3 text-xs text-center text-white/70",children:"Background removed"})]})]})]})]}),(0,r.jsxs)("div",{className:"md:hidden space-y-4",children:[(0,r.jsx)(p,{className:"bg-white/6 border border-white/8 rounded-lg",children:(0,r.jsxs)(v,{className:"p-4",children:[(0,r.jsxs)("div",{role:"button",tabIndex:0,onKeyDown:e=>{var t;("Enter"===e.key||" "===e.key)&&(null===(t=S.current)||void 0===t||t.click())},onClick:()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.click()},onDragOver:F,onDragLeave:I,onDrop:J,className:"flex flex-col items-center justify-center gap-3 p-4 rounded-md cursor-pointer ".concat(h?"border-purple-400 bg-white/6 border-2":"border-white/20 hover:border-purple-400/50 border-2"),children:[(0,r.jsx)("input",{type:"file",ref:S,onChange:G,accept:".png,.jpg,.jpeg,.webp",className:"hidden"}),(0,r.jsx)("div",{className:"bg-white/8 p-2 rounded-full",children:(0,r.jsx)(n.A,{className:"h-6 w-6 text-white/80"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:"Tap to upload"}),(0,r.jsx)("div",{className:"text-xs text-white/60 mt-0.5",children:"PNG, JPG, WEBP • ≤ 5MB"})]})]}),N&&(0,r.jsx)("div",{className:"mt-3 text-xs text-red-400",children:N})]})}),e||s?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h2",{className:"text-base font-medium text-white",children:"Preview"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[s&&(0,r.jsxs)(m,{variant:"ghost",size:"sm",onClick:K,className:"text-white/80 px-2 py-1 text-xs",children:[(0,r.jsx)(i.A,{className:"h-3 w-3 mr-1"}),"Download"]}),(0,r.jsx)(m,{variant:"ghost",size:"sm",onClick:W,className:"text-white/80 px-2 py-1 text-xs",children:"Clear"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,r.jsxs)(p,{className:"bg-white/6 border border-white/10 rounded-lg",children:[(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[220px] p-4",children:e?(0,r.jsx)("img",{src:e,alt:"Original",onLoad:()=>R(!0),className:"max-h-[300px] object-contain transition-opacity duration-300 ".concat(D?"opacity-100":"opacity-0")}):null}),(0,r.jsx)("div",{className:"p-2 text-xs text-center text-white/70",children:"Original"})]}),(0,r.jsxs)(p,{className:"bg-white/6 border border-white/10 rounded-lg",children:[(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[220px] p-4",style:s&&E?j(12):void 0,children:k?(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)(l.A,{className:"h-6 w-6 animate-spin text-purple-400 mb-1"}),(0,r.jsxs)("div",{className:"text-xs text-white/60",children:[Math.round(z),"%"]})]}):s?(0,r.jsx)("img",{src:s,alt:"Processed",onLoad:()=>O(!0),className:"max-h-[300px] object-contain transition-opacity duration-300 ".concat(L?"opacity-100":"opacity-0")}):null}),(0,r.jsx)("div",{className:"p-2 text-xs text-center text-white/70",children:"Background removed"})]})]})]}):null]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[219,615,497,954,358],()=>t(3481)),_N_E=e.O()}]);